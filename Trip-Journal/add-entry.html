<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trip Journal</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="tripform">
        <h2>Add a New Entry:</h2>
        <form id="trip-form">
            <label for="destination">Location:</label>
            <input type="text" id="destination" name="destination" required>

            <label for="places">Places you visited: </label>
            <textarea id="places" name="places" rows="3"></textarea>

            <div class="dates">
            <label for="startdate">Start Date:</label>
            <input type="date" id="startdate" name="startdate" required>
            <label for="enddate" style="margin-left:4.5em">End Date:</label>
            <input type="date" id="enddate" name="enddate" required>
            </div>

            <label for="notes">Thoughts on the trip: </label>
            <textarea id="notes" name="notes" rows="5"></textarea>

            <label for="weather">Weather: </label>
            <select id="weather" style="margin-bottom: 2em;">
                <option value="" selected disabled>Select a weather condition</option>
                <option value="Sunny">Sunny</option>
                <option value="Cloudy">Cloudy</option>
                <option value="Rainy">Rainy</option>
                <option value="Snowy">Snowy</option>
            </select>

            <label for="tips">Tips you would give to anyone travelling to this place: </label>
            <textarea id="tips" name="tips" rows="2" style="margin-bottom: 2em;"></textarea>

            <button type="submit">Add Entry</button>
        </form>
    </div>
    <div></div>
    <script>

        const entryForm = document.getElementById("trip-form");

        entryForm.addEventListener("submit", function (event) {
            event.preventDefault();

            const destination = document.getElementById("destination").value;
            const places = document.getElementById("places").value;
            const startdate = document.getElementById("startdate").value;
            const enddate = document.getElementById("enddate").value;
            const notes = document.getElementById("notes").value;
            const weather = document.getElementById("weather").value;
            const tips = document.getElementById("tips").value;

            const entry = {
                destination,
                places,
                startdate,
                enddate,
                notes,
                weather,
                tips,
            };

            // Check if localStorage already contains entries
            const existingEntries = JSON.parse(localStorage.getItem("tripEntries")) || [];

            // Add the new entry to the existing entries
            existingEntries.push(entry);

            // Save the updated entries back to localStorage
            localStorage.setItem("tripEntries", JSON.stringify(existingEntries));

            // Redirect to the "Previous-Entries" page
            window.location.href = "previous-entries.html";
        });
        
    </script>
</body>
</html>
